{% extends 'base.html.twig' %}

{% block title %}Hello ServiceController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
 
 
 <h1>List books</h1>
{{ form_start(f)}}
<b>{{ form_label(f.ref)}}:</b>
{{ form_widget(f.ref)}}
    {{ form_widget(f.search)}}
    {{ form_end(f)}}
 {#Afficher un message « No Books found » s’il n’y a aucun livre à afficher#}
 {% if books|length == 0 %}
        <p>No Books found</p>
    {% else %}
   <table border="1">
           <tr>
               <th>Ref</th>
               <th>Publication date</th>
               <th>Title</th>
               <th>Published</th>
               <th>Category</th>
               <th>Author</th>
               <th>Actions</th>
           </tr>
           {% for book in books %}
                   <tr>
                       <td>{{ book.ref }}</td>
                       <td>{{ book.publicationDate|date('Y-m-d')}}</td>
                       <td>{{ book.title }}</td>
                       <td>{{book.published}}</td>
                       <td>{{ book.category }}</td>
                       <td>{{ book.author.id }}</td>
                       <td>
                    <a href="{{ path('edit_book', {'id': book.ref}) }}">Edit</a>
                    <a href="{{ path('delete_book', {'id': book.ref}) }}">Delete</a>
                    <a href="{{ path('app_showB', {'id': book.ref}) }}">Show</a>
                       </td>
                   </tr>   
           {% endfor %}
   </table>
    {% endif %}
   </div>
   
   
{% endblock %}